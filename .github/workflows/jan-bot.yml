name: Jan-Bot-24-7

on:
  workflow_dispatch:       # à¦®à§à¦¯à¦¾à¦¨à§à§Ÿà¦¾à¦²à¦¿ GitHub UI à¦¥à§‡à¦•à§‡ à¦°à¦¾à¦¨ à¦•à¦°à¦¾à¦¨à§‹ à¦¯à¦¾à¦¬à§‡
  push:
    branches:
      - main              # main à¦¬à§à¦°à¦¾à¦žà§à¦šà§‡ push à¦¹à¦²à§‡ à¦°à¦¾à¦¨ à¦¹à¦¬à§‡
  schedule:
    - cron: '*/30 * * * *'  # à¦ªà§à¦°à¦¤à¦¿ à§©à§¦ à¦®à¦¿à¦¨à¦¿à¦Ÿà§‡ à¦°à¦¾à¦¨ à¦¹à¦¬à§‡
    - cron: '*/10 * * * *'  # à¦ªà§à¦°à¦¤à¦¿ à§§à§¦ à¦®à¦¿à¦¨à¦¿à¦Ÿà§‡ Vercel wakeup

jobs:
  run-bot:
    runs-on: ubuntu-latest

    env:
      CI: "true"
      SIMULATED_INPUT: "à¦¹à¦¾à¦¨à¦¿, à¦†à¦œà¦•à§‡ à¦à¦•à¦Ÿà§ à¦°à§‹à¦®à¦¾à¦¨à§à¦Ÿà¦¿à¦• à¦¹à¦“ ðŸ¥°"
      SIMULATED_UID: "100015569688497"

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Show directory content
        run: ls -la

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: pip install -r requirements.txt

      - name: Run Jan Bot
        run: python main.py

  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Wake up Vercel Frontend
        run: |
          curl --silent https://jan-ai-chatbot-free.vercel.app/ > /dev/null || true
